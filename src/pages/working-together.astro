---
import BaseLayout from '../layouts/BaseLayout.astro';
import WorkingTogetherCard from '../components/WorkingTogetherCard.astro';
const pageTitle = "Working together";
const raw = import.meta.glob('../content/testimonies/*.md', { eager: true });
const entries = Object.values(raw).map((m) => ({
  frontmatter: m.frontmatter,
  Content: m.Content
}));
// Sort by year DESC, then by name ASC
entries.sort((a, b) =>
  (b.frontmatter.year ?? 0) === (a.frontmatter.year ?? 0)
    ? String(a.frontmatter.name || '').localeCompare(String(b.frontmatter.name || ''))
    : (b.frontmatter.year ?? 0) - (a.frontmatter.year ?? 0)
);

---

<BaseLayout pageTitle={pageTitle}>
<style>
.testimonials{
  margin:3rem 0
}
</style>
<h2>Recommendations / Testimony</h2>
<p> This page is a little tribute to the amazing people I've had the chance to work with over the years. I'm deeply grateful to those who took the time to share what it was like working together. Your words mean a lot.
</p>
<p>If we've worked together and you'd like to add your voice,  <a href="/working-together/testimony" class="button">I'd love to read your thoughts.</a></p>
<div class="testimonials">
  {entries.map(({ frontmatter, Content }) => (
    <WorkingTogetherCard
      name={frontmatter.name}
      picture={frontmatter.picture}
      excerpt={frontmatter.excerpt}
      company={frontmatter.company}
      linkedin={frontmatter.linkedin}
      relationship={frontmatter.relationship}
    >
      <Content />
    </WorkingTogetherCard>
  ))}
</div>



</BaseLayout>