---
import BaseLayout from '../layouts/BaseLayout.astro';
import WorkingTogetherCard from '../components/WorkingTogetherCard.astro';
const pageTitle = "Working together";
import { getCollection } from 'astro:content';

const allTestimonies = await getCollection('testimonies');
const sortedTestimonies = allTestimonies.sort((a, b) =>
  b.data.year === a.data.year
    ? a.data.name.localeCompare(b.data.name)
    : b.data.year - a.data.year
);
---

<BaseLayout pageTitle={pageTitle}>
<style>
.testimonials{
  margin:3rem 0
}
</style>
<h2>Recommendations / Testimony</h2>
<p> This page is a little tribute to the amazing people I've had the chance to work with over the years. I'm deeply grateful to those who took the time to share what it was like working together. Your words mean a lot.
</p>
<p>If we've worked together and you'd like to add your voice,  <a href="/working-together/testimony" class="button">I'd love to read your thoughts.</a></p>
<div class="testimonials">
  {allTestimonies.map((testimony) => (
    <WorkingTogetherCard
      name={testimony.data.name}
      picture={testimony.data.picture}
      excerpt={testimony.data.excerpt}
      company={testimony.data.company}
      linkedin={testimony.data.linkedin}
      relationship={testimony.data.relationship}
      readmore="true"
    >
       <div class="testimonial-body" set:html={testimony.body} />
    </WorkingTogetherCard>
  ))}
</div>

</BaseLayout>